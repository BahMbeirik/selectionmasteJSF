<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Accueil Jury</title>
    <h:outputStylesheet name="css/styles.css" />
</h:head>
<h:body>

    <h:form id="formModif">
        <ui:include src="navbarA.xhtml" />
        <p:panel header="Liste des Etudiants" style="margin-bottom:20px;">
        <div style=" overflow-x: auto; max-width: 100%;">
        <p:dataTable  value="#{candidatBean.obtenirTousLesCandidats()}" var="candidat" paginator="true" rows="5" paginatorPosition="bottom" style="width: 100%; min-width: 2200px;">
            
            <p:column headerText="Nom et Prénom">
                <h:outputText value="#{candidat.nom} #{candidat.prenom}" />
            </p:column>
            
            <p:column headerText="Etablissement">
                <h:outputText value="#{candidat.etablissement.nom}" />
            </p:column>
            <p:column headerText="Filier">
                <h:outputText value="#{candidat.filier}" />
            </p:column>
            <p:column headerText="Numero d'inscriptin ou Bac">
                <h:outputText value="#{candidat.numero_I_ou_bac}" />
            </p:column>
            <p:column headerText="Année du Bac">
                <h:outputText value="#{candidat.anneeBac}" />
            </p:column>
            <p:column headerText="Moyenne Bac">
                <h:outputText value="#{candidat.moyenneBac}" />
            </p:column>
           <p:column headerText="Année Licence">
                <h:outputText value="#{candidat.anneeLicence}" />
            </p:column>
           <p:column headerText="Moyenne Licence">
                <h:outputText value="#{candidat.moyenneLicence}" />
            </p:column>
            <p:column headerText="Moyenne Releve 1">
                <h:outputText value="#{candidat.moyenneReleve1}" />
            </p:column>
            <p:column headerText="Moyenne Releve 2">
                <h:outputText value="#{candidat.moyenneReleve2}" />
            </p:column>
            <p:column headerText="Moyenne Releve 3">
                <h:outputText value="#{candidat.moyenneReleve3}" />
            </p:column>
            <p:column headerText="Moyenne Releve 4">
                <h:outputText value="#{candidat.moyenneReleve4}" />
            </p:column>
            <p:column headerText="Moyenne Releve 5">
                <h:outputText value="#{candidat.moyenneReleve5}" />
            </p:column>
            <p:column headerText="Moyenne Releve 6">
                <h:outputText value="#{candidat.moyenneReleve6}" />
            </p:column>
            <p:column headerText="Bonnus">
                <h:outputText value="#{candidat.bonnus}" >
                <f:convertNumber pattern="##0.00" />
                </h:outputText>
            </p:column>
            <p:column headerText="Malus">
                <h:outputText value="#{candidat.malus}" >
                <f:convertNumber pattern="##0.00" />
                </h:outputText>
            </p:column>
            <p:column headerText="Pénalité">
                <h:outputText value="#{candidat.penalite}" />
            </p:column>
            <p:column headerText="Actions">
                    <p:commandButton 
                                     actionListener="#{candidatBean.chargerCandidat(candidat.id)}" process="@this" oncomplete="PF('modifierDialog').show()"
                                     
                                     update="@form" icon="pi pi-pencil" style="margin-right:4px;"/>
                    <p:commandButton 
                                     action="#{candidatBean.supprimerCandidat(candidat.id)}"
                                     update="@form" icon="pi pi-trash" styleClass="logout-btn"/>
                </p:column>
            
        </p:dataTable>
        </div>
        </p:panel>
        
        <!-- FORMULAIRE DE MODIFICATION DANS UNE MODALE -->
<p:dialog widgetVar="modifierDialog" header="Modifier Candidat" modal="true" resizable="false">
        
    <h:panelGrid >
    	
    		<h:panelGrid columns="3">
            	<h:panelGrid columns="2" cellpadding="5">
	                <h:outputLabel for="nom" value="Nom :" />
	                <p:inputText id="nom" value="#{candidatBean.candidat.nom}" required="true" style="width: 300px; margin-left:55px;"/>
	 			</h:panelGrid>
	 			<h:panelGrid columns="2" cellpadding="5">
	                <h:outputLabel for="prenom" value="Prénom :" style=" margin-right:56px;"/>
	                <p:inputText id="prenom" value="#{candidatBean.candidat.prenom}" required="true" style="width: 300px;"/>
				  </h:panelGrid>
				  <h:panelGrid columns="2" cellpadding="5">
	                <h:outputLabel for="anneeLicence" value="Année Licence" style=" margin-right:18px;"/>
	                <p:inputText id="anneeLicence" value="#{candidatBean.candidat.anneeLicence}" style="width: 300px;"/>
				</h:panelGrid>
			 </h:panelGrid>
			 <h:panelGrid columns="3">
            	<h:panelGrid columns="2" cellpadding="5">
				  	<h:outputLabel for="anneeBac" value="Année du Bac" />
	                <p:inputText id="anneeBac" value="#{candidatBean.candidat.anneeBac}" style="width: 300px;"/>
				</h:panelGrid>
 				<h:panelGrid columns="2" cellpadding="5">
	                <h:outputLabel for="moyenneBac" value="Moyenne Bac" style=" margin-right:30px;"/>
	                <p:inputText id="moyenneBac" value="#{candidatBean.candidat.moyenneBac}" style="width: 300px;"/>
                </h:panelGrid>
                
                <h:panelGrid columns="2" cellpadding="5">
	                <h:outputLabel for="moyenneLicence" value="Moyenne Licence" />
	                <p:inputText id="moyenneLicence" value="#{candidatBean.candidat.moyenneLicence}" style="width: 300px;"/>
				 </h:panelGrid>
                
			 </h:panelGrid>
			 
			 
			 
			 </h:panelGrid>
			
                

            <h:panelGrid columns="4" >
           		<h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel for="moyenneReleve1" value="Moyenne Releve 1 :" />
                <p:inputText id="moyenneReleve1" value="#{candidatBean.candidat.moyenneReleve1}" style="width: 300px;"/>
                </h:panelGrid>
 				<h:panelGrid columns="2" cellpadding="5">
	            <h:outputLabel for="moyenneReleve2" value="Moyenne Releve 2 :" />
                <p:inputText id="moyenneReleve2" value="#{candidatBean.candidat.moyenneReleve2}" style="width: 300px;"/>
                </h:panelGrid>
 				<h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel for="moyenneReleve3" value="Moyenne Releve 3 :" />
                <p:inputText id="moyenneReleve3" value="#{candidatBean.candidat.moyenneReleve3}" style="width: 300px;"/>
                 </h:panelGrid>
			 </h:panelGrid>
			 <h:panelGrid columns="4">
            	<h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel for="moyenneReleve4" value="Moyenne Releve 4 :" />
                <p:inputText id="moyenneReleve4" value="#{candidatBean.candidat.moyenneReleve4}" style="width: 300px;"/>
                </h:panelGrid>
 				<h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel for="moyenneReleve5" value="Moyenne Releve 5 :" />
                <p:inputText id="moyenneReleve5" value="#{candidatBean.candidat.moyenneReleve5}" style="width: 300px;"/>
                </h:panelGrid>
 				<h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel for="moyenneReleve6" value="Moyenne Releve 6 :" />
                <p:inputText id="moyenneReleve6" value="#{candidatBean.candidat.moyenneReleve6}" style="width: 300px;"/>
                 </h:panelGrid>
			 </h:panelGrid>
			 
			 <h:panelGrid columns="4">
            	<h:panelGrid columns="2" cellpadding="5">
	                <p:outputLabel for="filier" value="Filière :" />
					<p:selectOneMenu id="filier" value="#{candidatBean.candidat.filier}" style="width: 300px; margin-left: 30px;">
					    <f:selectItem itemLabel="Sélectionner une filière" itemValue="" noSelectionOption="true"/>
					    <f:selectItems value="#{candidatBean.filiers}" var="filier" itemLabel="#{filier}" itemValue="#{filier}"/>
					</p:selectOneMenu>
	            </h:panelGrid>
 				<h:panelGrid columns="2" cellpadding="5">
					<p:outputLabel for="etablissement" value="Établissement :" style="margin-right : 20px;"/>
				    <p:selectOneMenu id="etablissement" value="#{candidatBean.candidat.etablissement}" required="true" style="width: 300px;" converter="etablissementConverter">
				        <f:selectItem itemLabel="Sélectionnez un établissement" itemValue="#{null}" />
				        <f:selectItems value="#{candidatBean.etablissements}" var="etablissement"
				                       itemLabel="#{etablissement.nom}" itemValue="#{etablissement}" />
				    </p:selectOneMenu>
             
				</h:panelGrid>
				
            	<h:panelGrid columns="2" cellpadding="5">
	                <p:outputLabel for="numero_I_ou_bac" value="Numero d'inscriptin ou Bac :" style="margin-left : 40px;"/>
                    <p:inputText id="numero_I_ou_bac" value="#{candidatBean.candidat.numero_I_ou_bac}" required="true" style="width: 300px; margin-left : 40px;"/>
	            </h:panelGrid>
			 </h:panelGrid>
			 
			 <h:panelGrid columns="4">
			 <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="etat_validation1" value="Etat de validation de S1 :" />
				<p:selectOneMenu id="etat_validation1" value="#{candidatBean.candidat.etat_validation1}" style="width: 200px;">
				    <f:selectItem itemLabel="Sélectionner L'etat de validation" itemValue="" noSelectionOption="true"/>
				    <f:selectItems value="#{candidatBean.etat_validations}" var="etat_validation" itemLabel="#{etat_validation}" itemValue="#{etat_validation}"/>
				</p:selectOneMenu>
              </h:panelGrid>
              
              <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="etat_validation2" value="Etat de validation de S2 :" />
						<p:selectOneMenu id="etat_validation2" value="#{candidatBean.candidat.etat_validation2}" style="width: 200px;">
						    <f:selectItem itemLabel="Sélectionner L'etat de validation" itemValue="" noSelectionOption="true"/>
						    <f:selectItems value="#{candidatBean.etat_validations}" var="etat_validation" itemLabel="#{etat_validation}" itemValue="#{etat_validation}"/>
						</p:selectOneMenu>
                </h:panelGrid>
                
                <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="etat_validation3" value="Etat de validation de S3 :" />
						<p:selectOneMenu id="etat_validation3" value="#{candidatBean.candidat.etat_validation3}" style="width: 200px;">
						    <f:selectItem itemLabel="Sélectionner L'etat de validation" itemValue="" noSelectionOption="true"/>
						    <f:selectItems value="#{candidatBean.etat_validations}" var="etat_validation" itemLabel="#{etat_validation}" itemValue="#{etat_validation}"/>
						</p:selectOneMenu>
                </h:panelGrid>
                
			 </h:panelGrid>
			 <h:panelGrid columns="4">
			 <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="etat_validation4" value="Etat de validation de S4 :" />
				<p:selectOneMenu id="etat_validation4" value="#{candidatBean.candidat.etat_validation4}" style="width: 200px;">
				    <f:selectItem itemLabel="Sélectionner L'etat de validation" itemValue="" noSelectionOption="true"/>
				    <f:selectItems value="#{candidatBean.etat_validations}" var="etat_validation" itemLabel="#{etat_validation}" itemValue="#{etat_validation}"/>
				</p:selectOneMenu>
              </h:panelGrid>
              
              <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="etat_validation5" value="Etat de validation de S5 :" />
						<p:selectOneMenu id="etat_validation5" value="#{candidatBean.candidat.etat_validation5}" style="width: 200px;">
						    <f:selectItem itemLabel="Sélectionner L'etat de validation" itemValue="" noSelectionOption="true"/>
						    <f:selectItems value="#{candidatBean.etat_validations}" var="etat_validation" itemLabel="#{etat_validation}" itemValue="#{etat_validation}"/>
						</p:selectOneMenu>
                </h:panelGrid>
                
                <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="etat_validation6" value="Etat de validation de S6 :" />
						<p:selectOneMenu id="etat_validation6" value="#{candidatBean.candidat.etat_validation6}" style="width: 200px;">
						    <f:selectItem itemLabel="Sélectionner L'etat de validation" itemValue="" noSelectionOption="true"/>
						    <f:selectItems value="#{candidatBean.etat_validations}" var="etat_validation" itemLabel="#{etat_validation}" itemValue="#{etat_validation}"/>
						</p:selectOneMenu>
                </h:panelGrid>
                
			 </h:panelGrid>
			 
			 <h:panelGrid columns="4" cellpadding="5">
	                <p:outputLabel for="penalite" value="Pénalité :" />
                    <p:inputText id="penalite" value="#{candidatBean.candidat.penalite}" required="true" style="width: 300px; margin-left : 40px;"/>
                    
                    <p:commandButton 
							    value="Modifier" 
							    action="#{candidatBean.modifierCandidat}" 
							    update="@form" 
							    process="@form"  
							    style="width: 150px;"
							    icon="pi pi-check" />


			<p:commandButton value="Annuler" 
			                 actionListener="#{candidatBean.annulerModification}" 
			                 update="@form"  style="width: 150px; margin-left:20px;"
			                 icon="pi pi-times" 
			                 styleClass="ui-button-secondary" />
			                 
	       </h:panelGrid>
			 
			 
			                 
		</p:dialog>	 
    </h:form>
</h:body>
</html>